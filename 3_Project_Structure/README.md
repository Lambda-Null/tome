# Project Structure

All of the files in a project are collectively referred to as its context, which will be the base of any absolute path specified within the project.

* [File Context](File_Context.md)
* [Staged Files](Staged_Files.md)
* [Building Tome Context](Building_Tome_Context.md)

## The `.tome` Directory

The top of a Tome project is identified by a directory called `.tome`. When commands like `build` run, they use the presence of that directory to identify what files need to be acted on. Any executables in `.tome/commands` will be used as [custom commands to the CLI](/1_CLI/README.md#project-commands).

Rather than write any files under `.tome` directly, those files are typically generated by Markdown files. Any path within a Tome project is a valid target to be written to, so targeting paths within this directory enables allows these commands to be part of the general documentation.

It may be tempting to add `.tome` to the `.gitignore` for the repository, but the directory's presence is important for normal operation. Also, although the commands are generated by Tome, it's not necessarily desirable to require somebody to run `build` before they do anything else after cloning the repository. For example, Tome itself defines a `dependencies` command, without installing those dependencies the parsing logic of the `build` command would be missing a library.

## Staged Directories

While it's valid to write files anywhere in a Tome project, certain directories are considered staged. When `tome build` is called, these directories are replaced in their entirety, deleting any files not generated in the current command.

Here are the paths which are treated in this special way:
- `/build`
- `/test`

These directories should be added to `.gitignore`, and if the project was establashed with [the init command](/1_CLI/1_Init.md) they will be automatically.

## Common Abstraction

Interacting with the context can be boiled down to a few abstract operations. These operations are grouped within an abstract base class.

`{#/build/context/base.py}: f`
```
class Context:
    def absolute_path(self, project_path):
        raise Exception("abstract")

    def relative_path(self, starting_point, project_path):
        raise Exception("abstract")

    def convert_system_path_to_project_path(self, path):
        raise Exception("abstract")

    def __iter__(self):
        raise Exception("abstract")
```
